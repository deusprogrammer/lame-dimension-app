let Users;_f87‍.x([["default",()=>_f87‍.o]]);_f87‍.w("../models/user",[["default",["Users"],function(v){Users=v}]]);

_f87‍.d({
    getUsers: (req, res) => {
        Users.find({}, (error, results) => {
            if (error) {
                res.send(error);
                res.status(400);
                return;
            }

            res.json(results);
        });
    },
    getUser: (req, res) => {
        Users.findById(req.params.id, (error, result) => {
            if (error) {
                res.send(error);
                res.status(400);
                return;
            }

            if (result === null) {
                res.status(404);
                res.send('User not found');
                return;
            }

            res.json(result);
        });
    },
    getSelf: (req, res) => {
        Users.findOne({ username: req.user.username }, (error, result) => {
            if (error) {
                res.send(error);
                res.status(400);
                return;
            }

            if (result === null) {
                res.status(404);
                res.send('User not found');
                return;
            }

            res.json(result);
        });
    },
    createUser: (req, res) => {
        req.body.roles = [];
        Users.create(req.body, (error, result) => {
            if (error) {
                res.send(error);
                res.status(400);
                return;
            }

            res.json(result);
        });
    },
});
